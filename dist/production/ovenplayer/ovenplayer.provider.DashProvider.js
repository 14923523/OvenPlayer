/*! For license information please see ovenplayer.provider.DashProvider.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getBrowser=function(){if(-1!=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR")))return"opera";if(-1!=navigator.userAgent.indexOf("Chrome"))return"chrome";if(-1!=navigator.userAgent.indexOf("Safari"))return"safari";if(-1!=navigator.userAgent.indexOf("Firefox"))return"firefox";if(-1!=navigator.userAgent.indexOf("MSIE")){navigator.userAgent.indexOf("MSIE");return function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return e>4?e:void 0}()<9?"oldIE":"modernIE"}return"unknown"}},278:function(e,t,n){e.exports=n.p+"OvenPlayerFlash.swf"},279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(119),o=n(9),a=function(e){return e&&e.__esModule?e:{default:e}}(n(278));t.default=function(e,t){var n={},i=e.getAttribute("data-parent-id"),u="",l=(0,r.getBrowser)();OvenPlayerConsole.log("MediaManager loaded. browserType : "+l);return n.create=function(){return OvenPlayerConsole.log("MediaManager createElement()"),u&&n.destroy(),function(){if(t!==o.PROVIDER_RTMP)(u=document.createElement("video")).setAttribute("disableRemotePlayback",""),u.setAttribute("webkit-playsinline",""),u.setAttribute("playsinline",""),e.appendChild(u);else{var n=void 0,r=void 0,s=void 0,d=void 0,c=void 0,E=void 0,f=void 0,g=void 0,v=void 0;(n=document.createElement("param")).setAttribute("name","movie"),n.setAttribute("value",a.default),(r=document.createElement("param")).setAttribute("name","flashvars"),r.setAttribute("value","playerId="+i),(s=document.createElement("param")).setAttribute("name","allowscriptaccess"),s.setAttribute("value","always"),(d=document.createElement("param")).setAttribute("name","allowfullscreen"),d.setAttribute("value","true"),(c=document.createElement("param")).setAttribute("name","quality"),c.setAttribute("value","height"),(E=document.createElement("param")).setAttribute("name","name"),E.setAttribute("value",i+"-flash"),(f=document.createElement("param")).setAttribute("name","menu"),f.setAttribute("value","false"),(g=document.createElement("param")).setAttribute("name","quality"),g.setAttribute("value","high"),(v=document.createElement("param")).setAttribute("name","bgcolor"),v.setAttribute("value","#000000"),(u=document.createElement("object")).setAttribute("id",i+"-flash"),u.setAttribute("name",i+"-flash"),u.setAttribute("width","100%"),u.setAttribute("height","100%"),"oldIE"!==l?(u.setAttribute("data",a.default),u.setAttribute("type","application/x-shockwave-flash")):(u.setAttribute("classid","clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"),u.appendChild(n)),u.appendChild(v),u.appendChild(g),u.appendChild(d),u.appendChild(s),u.appendChild(r),e.appendChild(u)}return u}()},n.destroy=function(){OvenPlayerConsole.log("MediaManager removeElement()"),e.removeChild(u),u=null},n}},280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9);t.default=function(e,t,n,o){var a={};OvenPlayerConsole.log("EventListener loaded.");var i={};return a.canplay=function(){o.setCanSeek(!0),o.trigger(r.CONTENT_BUFFER_FULL),OvenPlayerConsole.log("EventListener : on canplay")},a.durationchange=function(){a.progress(),OvenPlayerConsole.log("EventListener : on durationchange")},a.ended=function(){OvenPlayerConsole.log("EventListener : on ended"),o.getState()!=r.STATE_IDLE&&o.getState()!=r.STATE_COMPLETE&&(o.trigger(r.CONTENT_COMPLETE),o.setState(r.STATE_COMPLETE))},a.loadeddata=function(){OvenPlayerConsole.log("EventListener : on loadeddata")},a.loadedmetadata=function(){var a=n.duration==1/0||e===r.PROVIDER_DASH&&t.isDynamic(),i=o.getCurrentQuality()?o.getCurrentQuality().type:"",u={duration:a?1/0:n.duration,type:i};OvenPlayerConsole.log("EventListener : on loadedmetadata",u),o.trigger(r.CONTENT_META,u)},a.pause=function(){return o.getState()!==r.STATE_COMPLETE&&o.getState()!==r.STATE_ERROR&&!n.ended&&!n.error&&n.currentTime!==n.duration&&(OvenPlayerConsole.log("EventListener : on pause"),void o.setState(r.STATE_PAUSED))},a.play=function(){n.paused||o.getState()===r.STATE_PLAYING||(OvenPlayerConsole.log("EventListener : on play"),o.setState(r.STATE_LOADING))},a.playing=function(){OvenPlayerConsole.log("EventListener : on playing"),o.setState(r.STATE_PLAYING)},a.progress=function(){var e=n.buffered;if(!e)return!1;var t=n.duration,a=n.currentTime,i=function(e,t,n){return Math.max(Math.min(e,n),t)}((e.length>0?e.end(e.length-1):0)/t,0,1);OvenPlayerConsole.log("EventListener : on progress",100*i),o.setBuffer(100*i),o.trigger(r.CONTENT_BUFFER,{bufferPercent:100*i,position:a,duration:t})},a.stalled=function(){OvenPlayerConsole.log("EventListener : on stall")},a.timeupdate=function(){var e=n.currentTime,t=n.duration;isNaN(t)||(o.isSeeking()||n.paused||o.setState(r.STATE_PLAYING),OvenPlayerConsole.log("EventListener : on timeupdate",{position:e,duration:t}),(o.getState()===r.STATE_PLAYING||o.isSeeking())&&o.trigger(r.CONTENT_TIME,{position:e,duration:t}))},a.resize=function(){OvenPlayerConsole.log("EventListener : on resize")},a.seeking=function(){o.setSeeking(!0),OvenPlayerConsole.log("EventListener : on seeking",n.currentTime),o.trigger(r.CONTENT_SEEK,{position:n.currentTime})},a.seeked=function(){o.isSeeking()&&(OvenPlayerConsole.log("EventListener : on seeked"),o.setSeeking(!1),o.trigger(r.CONTENT_SEEKED))},a.waiting=function(){OvenPlayerConsole.log("EventListener : on waiting",o.getState()),o.isSeeking()?o.setState(r.STATE_LOADING):o.getState()==r.STATE_PLAYING&&o.setState(r.STATE_STALLED)},a.volumechange=function(){OvenPlayerConsole.log("EventListener : on volumechange",Math.round(100*n.volume)),o.trigger(r.CONTENT_VOLUME,{volume:Math.round(100*n.volume),mute:n.muted})},a.error=function(){var e=n.error&&n.error.code||0,t={0:{code:r.PLAYER_UNKNWON_ERROR,reason:"Unknown html5 video error",message:"Unknown html5 video error"},1:{code:r.PLAYER_UNKNWON_OPERATION_ERROR,reason:"Unknown operation aborted",message:"Unknown operation aborted"},2:{code:r.PLAYER_UNKNWON_NEWWORK_ERROR,reason:"Unknown network error",message:"Unknown network error"},3:{code:r.PLAYER_UNKNWON_DECODE_ERROR,reason:"Unknown decode error",message:"Unknown decode error"},4:{code:r.PLAYER_FILE_ERROR,reason:"File could not be played",message:"File could not be played"}}[e]||0;t.error=n.error,OvenPlayerConsole.log("EventListener : on error",t),function(e){o.setState(r.STATE_ERROR),o.pause(),o.trigger(r.ERROR,e)}(t)},Object.keys(a).forEach(function(e){n.removeEventListener(e,a[e]),n.addEventListener(e,a[e])}),i.destroy=function(){OvenPlayerConsole.log("EventListener : destroy()"),Object.keys(a).forEach(function(e){n.removeEventListener(e,a[e])})},i}},281:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(60)),o=u(n(280)),a=u(n(6)),i=n(9);function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n,u){OvenPlayerConsole.log("CORE loaded. ");var l={};(0,r.default)(l);var s=function(e,t){return a.default.isElement(t)?t:e===i.PROVIDER_DASH?t.getVideoElement():e===i.PROVIDER_HLS?t.media:null}(e,t),d=(0,o.default)(e,t,s,l),c=!1,E=!1,f=i.STATE_IDLE,g=0,v=-1,m=[],p=n.getConfig().image||"";s.playbackRate=s.defaultPlaybackRate=n.getDefaultPlaybackRate();var A=function(e){var t=Math.max(0,v);if(e)for(var r=0;r<e.length;r++)if(e[r].default&&(t=r),n.getQualityLabel()&&e[r].label===n.getQualityLabel())return r;return t},y=function(e){var t=m[v];if(u)u(t,e);else{OvenPlayerConsole.log("source loaded : ",t,"lastPlayPosition : "+e);var n=s.src,r=document.createElement("source");r.src=t.file,r.src!==n?(s.src=m[v].file,n&&s.load()):0==e&&s.currentTime>0&&l.seek(e),e>0&&(l.seek(e),l.play()),l.trigger(i.CONTENT_LEVELS,{currentQuality:v}),p&&(s.poster=p)}};return l.getName=function(){return e},l.canSeek=function(){return c},l.setCanSeek=function(e){c=e},l.isSeeking=function(){return E},l.setSeeking=function(e){E=e},l.setState=function(e){if(f!=e){var t=f;switch(e){case i.STATE_COMPLETE:l.trigger(i.PLAYER_COMPLETE);break;case i.STATE_PAUSED:l.trigger(i.PLAYER_PAUSE,{prevState:f});break;case i.STATE_PLAYING:l.trigger(i.PLAYER_PLAY,{prevState:f})}f=e,l.trigger(i.PLAYER_STATE,{prevstate:t,newstate:f})}},l.getState=function(){return f},l.setBuffer=function(e){g=e},l.getBuffer=function(){return g},l.getDuration=function(){return s.duration==1/0||e===i.PROVIDER_DASH&&t.isDynamic()?1/0:s.duration},l.getPosition=function(){return s.currentTime},l.setVolume=function(e){s.volume=e/100},l.getVolume=function(){return 100*s.volume},l.setMute=function(e){return void 0===e?(s.muted=!s.muted,l.trigger(i.CONTENT_MUTE,{mute:s.muted})):(s.muted=e,l.trigger(i.CONTENT_MUTE,{mute:s.muted})),s.muted},l.getMute=function(){return s.muted},l.preload=function(e,t){return v=A(m=e),y(t||0),new Promise(function(e,t){e()})},l.load=function(e){v=A(m=e),y(e.starttime||0)},l.play=function(){l.getState()!==i.STATE_PLAYING&&s.play()},l.pause=function(){l.getState()==i.STATE_PLAYING&&s.pause()},l.seek=function(e){s.currentTime=e},l.setPlaybackRate=function(e){return l.trigger(i.PLAYBACK_RATE_CHANGED,{playbackRate:e}),s.playbackRate=s.defaultPlaybackRate=e},l.getPlaybackRate=function(){return s.playbackRate},l.getQualityLevels=function(){return m.map(function(e,t){return{file:e.file,type:e.type,label:e.label,index:t}})},l.getCurrentQuality=function(){var e=m[v];return{file:e.file,type:e.type,label:e.label,index:v}},l.setCurrentQuality=function(e,t){return v!=e&&(e>-1&&m&&m.length>e?(l.setState(i.STATE_IDLE),OvenPlayerConsole.log("source changed : "+e),v=e,l.trigger(i.CONTENT_LEVEL_CHANGED,{currentQuality:e}),n.setQualityLabel(m[e].label),t&&y(s.currentTime||0),v):void 0)},l.stop=function(){for(OvenPlayerConsole.log("CORE : stop() "),s.removeAttribute("preload"),s.removeAttribute("src");s.firstChild;)s.removeChild(s.firstChild);l.pause(),l.setState(i.STATE_IDLE)},l.destroy=function(){l.stop(),d.destroy(),l.off(),OvenPlayerConsole.log("CORE : destroy() player stop, listener, event destroied")},l.super=function(e){var t=l[e];return function(){return t.apply(l,arguments)}},l}},63:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(279)),o=i(n(281)),a=n(9);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n="download",i="manifestError",u=(0,r.default)(e,a.PROVIDER_DASH),l=u.create(),s="",d={},c="",E="",f=0,g=!1;try{(s=dashjs.MediaPlayer().create()).getDebug().setLogToBrowserConsole(!1),s.initialize(l,null,!1),s.on(dashjs.MediaPlayer.events.ERROR,function(e){!e||g||e.error!==n&&e.error!==i||(g=!0,function(e){d.setState(a.STATE_ERROR),d.pause(),d.trigger(a.ERROR,e)}({code:a.PLAYER_UNKNWON_NEWWORK_ERROR,reason:"Unknown network error",message:"Unknown network error"}))}),d=(0,o.default)(a.PROVIDER_DASH,s,t,function(e,t){OvenPlayerConsole.log("DASH : onBeforeLoad : ",e,"lastPlayPosition : "+t),s.attachSource(e.file),f=t}),OvenPlayerConsole.log("DASH PROVIDER LOADED."),E=d.super("play"),c=d.super("destroy"),d.on(a.CONTENT_META,function(e){s.isDynamic()?E():f&&(s.seek(f),E())},d),d.destroy=function(){s.reset(),u.destroy(),OvenPlayerConsole.log("DASH : PROVIDER DESTROYED."),c()}}catch(e){throw new Error(e)}return d}}}]);
//# sourceMappingURL=ovenplayer.provider.DashProvider.js.map