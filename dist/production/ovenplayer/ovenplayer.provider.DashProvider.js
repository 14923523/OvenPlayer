/*! OvenPlayerv0.6.1 | (c)2018 AirenSoft Co., Ltd. | MIT license (https://github.com/AirenSoft/OvenPlayerPrivate/blob/master/LICENSE) | Github : https://github.com/AirenSoft/OvenPlayer */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(n(59)),r=n(8);t.default=function(e,t){var n="",a={},l="",i="",u=0;try{(n=dashjs.MediaPlayer().create()).getDebug().setLogToBrowserConsole(!1),n.initialize(e,null,!1),a=(0,o.default)(r.PROVIDER_DASH,n,t,function(e,t){OvenPlayerConsole.log("DASH : source loaded : ",e,"lastPlayPosition : "+t),n.attachSource(e.file),u=t}),OvenPlayerConsole.log("DASH PROVIDER LOADED."),i=a.super("play"),l=a.super("destroy"),a.on(r.CONTENT_META,function(e){n.isDynamic()?i():u&&(n.seek(u),i())}),a.destroy=function(){n.reset(),OvenPlayerConsole.log("DASH : PROVIDER DESTROYED."),l()}}catch(e){throw new Error(e)}return a}},59:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=u(n(9)),a=u(n(60)),l=n(8),i=u(n(1));u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n,u){OvenPlayerConsole.log("CORE loaded. ");var s=o({on:r.default.on,once:r.default.once,off:r.default.off,trigger:r.default.trigger}),g=function(e,t){return i.default.isElement(t)?t:e===l.PROVIDER_DASH?t.getVideoElement():e===l.PROVIDER_HLS?t.media:null}(e,t),E=(0,a.default)(e,t,g,s),c=!1,O=!1,d=l.STATE_IDLE,f=0,v=-1,C=[],y=n.getConfig().image||"";g.playbackRate=g.defaultPlaybackRate=n.getDefaultPlaybackRate();var P=function(e){v=function(e){var t=Math.max(0,v);if(e)for(var o=0;o<e.length;o++)if(e[o].default&&(t=o),n.getQualityLabel()&&e[o].label===n.getQualityLabel())return o;return t}(e)},T=function(e){var t=C[v];if(u)u(t,e);else{OvenPlayerConsole.log("source loaded : ",t,"lastPlayPosition : "+e);var n=g.src,o=document.createElement("source");o.src=t.file,o.src!==n?(g.src=C[v].file,n&&g.load()):0==e&&g.currentTime>0&&s.seek(e),e>0&&(s.seek(e),s.play()),s.trigger(l.CONTENT_LEVELS,{currentQuality:v}),y&&(g.poster=y)}};return s.getCurrentSource=function(){return OvenPlayerConsole.log("CORE : getCurrentSource() ",C[v]),C[v]},s.canSeek=function(){return OvenPlayerConsole.log("CORE : canSeek() ",c),c},s.setCanSeek=function(e){OvenPlayerConsole.log("CORE : setCanSeek() ",e),c=e},s.isSeeking=function(){return OvenPlayerConsole.log("CORE : isSeeking() ",O),O},s.setSeeking=function(e){OvenPlayerConsole.log("CORE : setSeeking() ",e),O=e},s.setPlayerElement=function(e){OvenPlayerConsole.log("CORE : setPlayerElement() ",e),g=e},s.setState=function(e){if(d!=e){var t=d;switch(e){case l.STATE_COMPLETE:s.trigger(l.PLAYER_COMPLETE);break;case l.STATE_PAUSED:s.trigger(l.PLAYER_PAUSE,{prevState:d});break;case l.STATE_PLAYING:s.trigger(l.PLAYER_PLAY,{prevState:d})}d=e,OvenPlayerConsole.log("CORE : setState() ",d),s.trigger(l.PLAYER_STATE,{prevstate:t,newstate:d})}},s.getState=function(){return OvenPlayerConsole.log("CORE : getState() ",d),d},s.setBuffer=function(e){OvenPlayerConsole.log("CORE : setBuffer() ",e),f=e},s.getBuffer=function(){return OvenPlayerConsole.log("CORE : getBuffer() ",f),f},s.getDuration=function(){var n=g.duration==1/0||e===l.PROVIDER_DASH&&t.isDynamic();return OvenPlayerConsole.log("CORE : getDuration() ",n?1/0:g.duration),n?1/0:g.duration},s.getPosition=function(){return OvenPlayerConsole.log("CORE : getPosition() ",g.currentTime),g.currentTime},s.setVolume=function(e){OvenPlayerConsole.log("CORE : setVolume() ",e),g.volume=e/100},s.getVolume=function(){return OvenPlayerConsole.log("CORE : getVolume() ",100*g.volume),100*g.volume},s.setMute=function(e){return void 0===e?(g.muted=!g.muted,s.trigger(l.CONTENT_MUTE,{mute:g.muted})):(g.muted=e,s.trigger(l.CONTENT_MUTE,{mute:g.muted})),OvenPlayerConsole.log("CORE : setMute() ",g.muted),g.muted},s.getMute=function(){return OvenPlayerConsole.log("CORE : setMute() ",g.muted),g.muted},s.preload=function(e,t){OvenPlayerConsole.log("CORE : preload() ",e,t),P(C=e),T(t||0)},s.load=function(e){OvenPlayerConsole.log("CORE : load() ",e),P(C=e),T(e.starttime||0)},s.play=function(){OvenPlayerConsole.log("CORE : play() "),s.getState()!==l.STATE_PLAYING&&g.play()},s.pause=function(){OvenPlayerConsole.log("CORE : pause() "),s.getState()==l.STATE_PLAYING&&g.pause()},s.seek=function(e){OvenPlayerConsole.log("CORE : seek() ",e),g.currentTime=e},s.setPlaybackRate=function(e){return s.trigger(l.PLAYBACK_RATE_CHANGED,{playbackRate:e}),OvenPlayerConsole.log("CORE : setPlaybackRate() ",e),g.playbackRate=g.defaultPlaybackRate=e},s.getPlaybackRate=function(){return OvenPlayerConsole.log("CORE : getPlaybackRate() ",g.playbackRate),g.playbackRate},s.getQualityLevels=function(){var e=C.map(function(e){return function(e){return{bitrate:e.bitrate,label:e.label,width:e.width,height:e.height}}(e)});return OvenPlayerConsole.log("CORE : getQualityLevels() ",e),e},s.getCurrentQuality=function(){return OvenPlayerConsole.log("CORE : getCurrentQuality() ",v),v},s.setCurrentQuality=function(e,t){return OvenPlayerConsole.log("CORE : setCurrentQuality() ",e,t),v!=e&&(e>-1&&C&&C.length>e?(s.setState(l.STATE_IDLE),OvenPlayerConsole.log("source changed : "+e),v=e,s.trigger(l.CONTENT_LEVEL_CHANGED,{currentQuality:e}),n.setQualityLabel(C[e].label),t&&T(g.currentTime||0),v):void 0)},s.stop=function(){for(OvenPlayerConsole.log("CORE : stop() "),g.removeAttribute("preload"),g.removeAttribute("src");g.firstChild;)g.removeChild(g.firstChild);s.pause(),s.setState(l.STATE_IDLE)},s.destroy=function(){s.stop(),E.destroy(),s.off(),OvenPlayerConsole.log("CORE : destroy() player stop, listener, event destroied")},s.super=function(e){var t=s[e];return function(){return t.apply(s,arguments)}},s}},60:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8);t.default=function(e,t,n,r){var a={};OvenPlayerConsole.log("EventListener loaded.");var l={};return a.canplay=function(){r.setCanSeek(!0),r.trigger(o.CONTENT_BUFFER_FULL),OvenPlayerConsole.log("EventListener : on canplay")},a.durationchange=function(){a.progress(),OvenPlayerConsole.log("EventListener : on durationchange")},a.ended=function(){OvenPlayerConsole.log("EventListener : on ended"),r.getState()!=o.STATE_IDLE&&r.getState()!=o.STATE_COMPLETE&&(r.trigger(o.CONTENT_COMPLETE),r.setState(o.STATE_COMPLETE))},a.loadeddata=function(){OvenPlayerConsole.log("EventListener : on loadeddata")},a.loadedmetadata=function(){var a=n.duration==1/0||e===o.PROVIDER_DASH&&t.isDynamic(),l=r.getCurrentSource()?r.getCurrentSource().type:"",i={duration:a?1/0:n.duration,type:l};OvenPlayerConsole.log("EventListener : on loadedmetadata",i),r.trigger(o.CONTENT_META,i)},a.pause=function(){return r.getState()!==o.STATE_COMPLETE&&r.getState()!==o.STATE_ERROR&&!n.ended&&!n.error&&n.currentTime!==n.duration&&(OvenPlayerConsole.log("EventListener : on pause"),void r.setState(o.STATE_PAUSED))},a.play=function(){n.paused||r.getState()===o.STATE_PLAYING||(OvenPlayerConsole.log("EventListener : on play"),r.setState(o.STATE_LOADING))},a.playing=function(){OvenPlayerConsole.log("EventListener : on playing"),r.setState(o.STATE_PLAYING)},a.progress=function(){var e=n.buffered;if(!e)return!1;var t=n.duration,a=n.currentTime,l=function(e,t,n){return Math.max(Math.min(e,n),t)}((e.length>0?e.end(e.length-1):0)/t,0,1);OvenPlayerConsole.log("EventListener : on progress",100*l),r.setBuffer(100*l),r.trigger(o.CONTENT_BUFFER,{bufferPercent:100*l,position:a,duration:t})},a.stalled=function(){OvenPlayerConsole.log("EventListener : on stall")},a.timeupdate=function(){var e=n.currentTime,t=n.duration;isNaN(t)||(r.isSeeking()||n.paused||r.setState(o.STATE_PLAYING),OvenPlayerConsole.log("EventListener : on timeupdate",{position:e,duration:t}),(r.getState()===o.STATE_PLAYING||r.isSeeking())&&r.trigger(o.CONTENT_TIME,{position:e,duration:t}))},a.resize=function(){OvenPlayerConsole.log("EventListener : on resize")},a.seeking=function(){r.setSeeking(!0),OvenPlayerConsole.log("EventListener : on seeking",n.currentTime),r.trigger(o.CONTENT_SEEK,{position:n.currentTime})},a.seeked=function(){r.isSeeking()&&(OvenPlayerConsole.log("EventListener : on seeked"),r.setSeeking(!1),r.trigger(o.CONTENT_SEEKED))},a.waiting=function(){OvenPlayerConsole.log("EventListener : on waiting",r.getState()),r.isSeeking()?r.setState(o.STATE_LOADING):r.getState()==o.STATE_PLAYING&&r.setState(o.STATE_STALLED)},a.volumechange=function(){OvenPlayerConsole.log("EventListener : on volumechange",Math.round(100*n.volume)),r.trigger(o.CONTENT_VOLUME,{volume:Math.round(100*n.volume),mute:n.muted})},a.error=function(){var e=n.error&&n.error.code||0,t={0:{code:o.PLAYER_UNKNWON_ERROR,reason:"Unknown html5 video error",message:"Unknown html5 video error"},1:{code:o.PLAYER_UNKNWON_OPERATION_ERROR,reason:"Unknown operation aborted",message:"Unknown operation aborted"},2:{code:o.PLAYER_UNKNWON_NEWWORK_ERROR,reason:"Unknown network error",message:"Unknown network error"},3:{code:o.PLAYER_UNKNWON_DECODE_ERROR,reason:"Unknown decode error",message:"Unknown decode error"},4:{code:o.PLAYER_FILE_ERROR,reason:"File could not be played",message:"File could not be played"}}[e]||0;t.error=n.error,OvenPlayerConsole.log("EventListener : on error",t),function(e){r.setState(o.STATE_ERROR),r.pause(),r.trigger(o.ERROR,e)}(t)},Object.keys(a).forEach(function(e){n.removeEventListener(e,a[e]),n.addEventListener(e,a[e])}),l.destroy=function(){OvenPlayerConsole.log("EventListener : destroy()"),Object.keys(a).forEach(function(e){n.removeEventListener(e,a[e])})},l}}}]);
//# sourceMappingURL=ovenplayer.provider.DashProvider.js.map